<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>掲示板</title>
</head>
<body>

	<h1>掲示板</h1>

	<form action="bbs.html" th:action="@{/post-article}"
		th:object="${articleForm}" method="post">
		<div th:if="${#fields.hasErrors('name')}" th:errors="*{name}"
			style="color: red"></div>
		投稿者名:<input type="text" name="name" th:field="*{name}"><br>

		<div th:if="${#fields.hasErrors('content')}" th:errors="*{content}"
			style="color: red"></div>
		投稿内容:<br>
		<textarea rows="5" cols="50" name="content" th:field="*{content}"></textarea>
		<br>
		<button type="submit">記事投稿</button>
	</form>

	<span th:text="${articleNotExist}"></span>

	<div th:object="${parentForm}">
		<div th:each="article, stat : ${articleList}">
			<hr>
			<div th:object="${article}">
				投稿者名:<span th:text="*{name}">name</span><br> 投稿内容:<br> <span
					th:text="*{content}"
					style="font-family: YuGothic, 'Yu Gothic', sans-serif; font-weight: bold">content</span><br>
				<br> <a th:href="@{'/delete?id=' + *{id}}">記事削除</a> <br> <br>
				<div th:each="comment : *{commentList}">
					<div th:object="${comment}">
						コメント者名:<span th:text="*{name}">name</span><br> コメント内容:<br>
						<span th:text="*{content}"
							style="font-family: YuGothic, 'Yu Gothic', sans-serif; font-weight: bold">content</span>
						<br> <br>
					</div>
				</div>


			</div>

			<form th:action="@{/post-comment}">
				<!-- <div
					th:if="${#fields.hasErrors('comments[' + stat.index + '].name')}"
					th:errors="*{comments[__${stat.index}__].name}"></div> -->
				名前:<input type="text" name="name"
					th:field="*{comments[__${stat.index}__].name}"><br>

				<!-- <div
					th:if="${#fields.hasErrors('comments[' + stat.index + '].name')}"
					th:errors="*{comments[__${stat.index}__].name}"></div> -->
				コメント:<br>
				<textarea name="content"
					th:field="*{comments[__${stat.index}__].content}"></textarea>
				<br> <input type="hidden" name="articleId"
					th:value="${article.id}"
					th:field="*{comments[__${stat.index}__].id}"> <input
					type="submit" value="コメント投稿">
				<!-- 
				
                <div class="form-group">
                    <div 
                         th:if="${#fields.hasErrors('comments[' + stat.index + '].name')}"
                         th:errors="*{comments[__${stat.index}__].name}"></div>
                    <label>名前：</label>
                    <input type="text" class="form-control" name="name"
                           th:field="*{comments[__${stat.index}__].name}">
                </div>
                <div class="form-group">
                    <div class="alert-danger comment-alert"
                         th:if="${#fields.hasErrors('comments[' + stat.index + '].content')}"
                         th:errors="*{comments[__${stat.index}__].content}"></div>
                    <label>コメント：</label><br>
                    <textarea class="form-control" name="content"
                              th:field="*{comments[__${stat.index}__].content}"></textarea>
                </div>
                <input type="hidden" th:value="${article.id}">
                <input type="submit" class="btn btn-primary insert-comment-button" value="コメント投稿">
            </form>
				 -->
			</form>


		</div>

	</div>


</body>
</html>